---
title: django认证系统
categories:
  - 服务端开发
tags:
  - django
date: 2021-07-20 17:00:31
---

### django认证系统

Django的认证系统提供了认证机制和权限机制

##### 常用方法：

- `set_password`(*raw_password*)

  设置用户的密码为给定的原始字符串，并负责密码的。 不会保存`User` 对象。当`None` 为`raw_password` 时，密码将设置为一个不可用的密码。

- `check_password`(*raw_password*)

  如果给定的raw_password是用户的真实密码，则返回True，可以在校验用户密码时使用。

##### 管理器方法：

管理器方法即可以通过`User.objects.` 进行调用的方法。

- `create_user`(*username*, *email=None*, *password=None*, **\*extra_fields*)

  创建、保存并返回一个`User`对象。

- `create_superuser`(*username*, *email*, *password*, **\*extra_fields*)

  与`create_user()` 相同，但是设置`is_staff` 和`is_superuser` 为`True`。

### 创建自定义的用户模型类

models.py

```python
from django.contrib.auth.models import AbstractUser
class User(AbstractUser):
    """用户模型类"""
    mobile = models.CharField(max_length=11, unique=True, verbose_name='手机号')

    class Meta:
        db_table = 'tb_users'
        verbose_name = '用户'
        verbose_name_plural = verbose_name
```

settings.py

```python
AUTH_USER_MODEL = 'users.User'
```

数据迁移

```shell
python manage.py makemigrations
python manage.py migrate
```

### 补充

[Django中的用户认证-官方文档](https://yiyibooks.cn/xx/Django_1.11.6/topics/auth/index.html)

